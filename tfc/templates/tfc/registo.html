{% extends 'tfc/layout.html' %}

{% block title %}Registar{% endblock %}

{% block content %}
{% load static %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<div class="register-page">
    <div class="form-container">
        <h3>Criar Conta</h3>

        {% if mensagem %}
            <p class="error-message">{{ mensagem }}</p>
        {% endif %}

        <form action="{% url 'tfc:registo' %}" method="post" class="register-form" enctype="multipart/form-data">
            {% csrf_token %}

            <label for="nome">Nome de Utilizador * </label>
            <input type="text" name="nome" placeholder="Nome da Família" required>

            <label for="email">Email * </label>
            <input type="email" name="email" placeholder="Email" required>

            <label for="password">Password * </label>
            <div style="position: relative; width: 100%;">
                <input type="password" id="password" name="password" required style="width: 100%; padding-right: 40px;">
                <button type="button" id="toggle-password" aria-label="Mostrar palavra-passe" style="
                    position: absolute;
                    top: 45%;
                    transform: translateY(-50%);
                    right: 0;
                    height: 100%;
                    width: 60px;
                    border: none;
                    background: transparent;
                    cursor: pointer;
                    font-size: 18px;
                    padding: 0;
                    margin: 0;
                    color: #555;
                ">
                <i id="eye-icon" class="bi bi-eye-slash"></i>
                </button>
            </div>


            <label for="foto">Foto da Família (opcional)</label>
            <input type="file" name="foto" accept="image/*">

            <label for="apresentacao_familia">Apresentação (opcional)</label>
            <input type="file" name="apresentacao_familia" accept="audio/*, video/*, .pdf, .doc, .docx">

            <input type="submit" value="Criar Conta">
        </form>

        <p class="login-prompt"> <a>Já tem uma conta? </a></p>
            <h2><a href="{% url 'tfc:login' %}" style="color: white;">Entrar</a></h2>
        </p>
    </div>
</div>

<script>
  const toggleBtn = document.getElementById("toggle-password");
  const passwordInput = document.getElementById("password");
  const eyeIcon = document.getElementById("eye-icon");

  toggleBtn.addEventListener("click", () => {
    const isVisible = passwordInput.type === "text";
    passwordInput.type = isVisible ? "password" : "text";
    eyeIcon.className = isVisible ? "bi bi-eye-slash" : "bi bi-eye";
  });
</script>
{% endblock %}
